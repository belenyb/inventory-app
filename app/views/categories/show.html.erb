<div class="detalle-categoria">
  <%= render partial: 'shared/section_title', locals: {title: @category.capitalize, backButton: true} %>
  <div class="table-responsive">
    <table class="table table-striped table-sm align-middle">
      <thead>
        <tr>
          <th scope="col">Nombre</th>
          <th scope="col">Descripcion</th>
          <th scope="col">SKU</th>
          <th scope="col">Stock</th>
          <th scope="col">Precio</th>
          <th></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <% @items.each do |item| %>
          <tr>
            <td><%= item.item_name %></td>
            <td><%= item.description %></td>
            <td><%= item.sku %></td>
            <td><%= format_price(item.quantity_on_hand) %></td>
            <td><%= format_price(item.sale_price_per_unit) %></td>
            <td>
              <%= link_to edit_product_path(item._uuid) do %>
                <i class="bi bi-pencil-square text-primary"></i>
              <% end %>
            </td>
            <td>
              <a type="button" class="dropdown-item" data-bs-toggle="modal" data-bs-target="#deleteConfirmationModal">
                <i class="bi bi-trash text-danger"></i>
              </a>
              <%= render partial: 'shared/delete_confirmation', locals: {id: item._uuid} %>
            </td>
          </tr>
        <% end %>
        <% total_quantity_on_hand = @items.sum(&:quantity_on_hand) %>
        <% total_sale_price_per_unit = @items.sum(&:sale_price_per_unit) %>
        <tr class="bg-dark">
          <td></td>
          <td></td>
          <td></td>
          <td class="text-white"><strong><%= format_price(total_quantity_on_hand) %></strong></td>
          <td class="text-white"><strong><%= format_price(total_sale_price_per_unit) %></strong></td>
          <td></td>
          <td></td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
