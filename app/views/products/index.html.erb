<div class="inventario">
  <%= render partial: 'shared/section_title', locals: {title: "Productos", backButton: false} %>
  <div class="table-responsive">
    <table class="table table-striped table-sm align-middle">
      <thead>
        <tr>
          <th scope="col">Nombre</th>
          <th scope="col">Descripcion</th>
          <th scope="col">SKU</th>
          <th scope="col">Categoria</th>
          <th scope="col">Stock</th>
          <th scope="col">Precio</th>
          <th></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <% @items.each do |item| %>
          <tr>
            <td><%= item.item_name %></td>
            <td><%= item.description %></td>
            <td><%= item.sku %></td>
            <td><%= item.category %></td>
            <td><%= item.quantity_on_hand %></td>
            <td><%= item.sale_price_per_unit %></td>
            <td>
              <%= link_to edit_product_path(item._uuid) do %>
                <i class="bi bi-pencil-square text-primary"></i>
              <% end %>
            </td>
            <td>
              <%= button_to product_path(item._uuid), method: :delete, data: { confirm: "Are you sure you want to delete this product?" }, class: "border-0 bg-transparent" do %>
                <i class="bi bi-trash text-danger"></i>
              <% end %>
            </td>
          </tr>
        <% end %>
        <% total_quantity_on_hand = @items.sum(&:quantity_on_hand) %>
        <% total_sale_price_per_unit = @items.sum(&:sale_price_per_unit) %>
        <tr class="bg-dark">
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td class="text-white"><strong><%= total_quantity_on_hand %></strong></td>
          <td class="text-white"><strong><%= total_sale_price_per_unit %></strong></td>
          <td></td>
          <td></td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
